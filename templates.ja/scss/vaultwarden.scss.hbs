/**** START Static Vaultwarden changes ****/
/* これは、これを拡張するすべてのセレクタを1つに結合します */
%vw-hide {
  display: none !important;
}

/* これにより、ブラウザの開発ツールで結合されたスタイルを検索できます（headタグ内を確認） */
.vw-hide,
head {
  @extend %vw-hide;
}

/* サブスクリプションページのタブを非表示にします */
bit-nav-item[route="settings/subscription"] {
  @extend %vw-hide;
}

/* Free Bitwarden Families を指すリンクを非表示にします */
a[href$="/settings/sponsored-families"] {
  @extend %vw-hide;
}

/* SSO `Email` 入力フィールドを非表示にします */
{{#if (not sso_enabled)}}
.vw-email-sso {
  @extend %vw-hide;
}
{{/if}}

/* デフォルト/続行 `Email` 入力フィールドを非表示にします */
{{#if sso_enabled}}
.vw-email-continue {
  @extend %vw-hide;
}
{{/if}}

/* ログインページの `Continue` ボタンを非表示にします */
{{#if sso_enabled}}
.vw-continue-login {
  @extend %vw-hide;
}
{{/if}}

/* ログインページの `Enterprise Single Sign-On` ボタンを非表示にします */
{{#if (webver ">=2025.5.1")}}
{{#if (not sso_enabled)}}
.vw-sso-login {
  @extend %vw-hide;
}
{{/if}}
{{else}}
app-root ng-component > form > div:nth-child(1) > div > button[buttontype="secondary"].\!tw-text-primary-600:nth-child(4) {
  @extend %vw-hide;
}
{{/if}}

/* `Log in with passkey` 設定を非表示にします */
app-user-layout app-password-settings app-webauthn-login-settings {
  @extend %vw-hide;
}
/* ログインページの `Log in with passkey` を非表示にします */
{{#if (webver ">=2025.5.1")}}
.vw-passkey-login {
  @extend %vw-hide;
}
{{else}}
app-root ng-component > form > div:nth-child(1) > div > button[buttontype="secondary"].\!tw-text-primary-600:nth-child(3) {
  @extend %vw-hide;
}
{{/if}}

/* 上記で非表示にした2つのボタンの前にある or テキストを非表示にします */
{{#if (webver ">=2025.5.1")}}
{{#if (or (not sso_enabled) sso_only)}}
.vw-or-text {
  @extend %vw-hide;
}
{{/if}}
{{else}}
app-root ng-component > form > div:nth-child(1) > div:nth-child(3) > div:nth-child(2) {
  @extend %vw-hide;
}
{{/if}}

/* ログインページの `Other` ボタンを非表示にします */
{{#if (or (not sso_enabled) sso_only)}}
.vw-other-login {
  @extend %vw-hide;
}
{{/if}}

/* 組織設定の Two-Factor メニューを非表示にします */
bit-nav-item[route="settings/two-factor"],
a[href$="/settings/two-factor"] {
  @extend %vw-hide;
}

/* 組織プランを非表示にします */
app-organization-plans > form > bit-section:nth-child(2) {
  @extend %vw-hide;
}

/* コレクション管理フォームを非表示にします */
app-org-account form.ng-untouched:nth-child(5) {
  @extend %vw-hide;
}

/* 組織レポートの 'Member Access' レポートカードを非表示にします */
app-org-reports-home > app-report-list > div.tw-inline-grid > div:nth-child(6) {
  @extend %vw-hide;
}

/* Two Step Login 画面の Device Verification フォームを非表示にします */
app-security > app-two-factor-setup > form {
  @extend %vw-hide;
}

/* サポートされていないカスタムロールオプションを非表示にします */
bit-dialog div.tw-ml-4:has(bit-form-control input),
bit-dialog div.tw-col-span-4:has(input[formcontrolname*="access"], input[formcontrolname*="manage"]) {
  @extend %vw-hide;
}

/* 折りたたまれたメニューアイコンを Vaultwarden に変更します */
bit-nav-logo bit-nav-item a:before {
  content: "";
  background-image: url("../images/icon-white.svg");
  background-repeat: no-repeat;
  background-position: center center;
  height: 32px;
  display: block;
}
bit-nav-logo bit-nav-item .bwi-shield {
  @extend %vw-hide;
}
/* ユーザー設定ページの Device Login Protection ボタンを非表示にします */
app-user-layout app-danger-zone button:nth-child(1) {
  @extend %vw-hide;
}
/**** END Static Vaultwarden Changes ****/
/**** START Dynamic Vaultwarden Changes ****/
{{#if signup_disabled}}
/* Web Vault 2025.1.2 以降では、サインアップが無効になっている場合、
  Web Vault が /api/config エンドポイントをチェックするため、サインアップボタンは非表示になります。
  クライアントはこのエンドポイントを約1時間キャッシュする傾向があるため、変更が反映されるまでに時間がかかる場合があります。
  ボタンが表示されるべきでないときに表示されるのを避けるため、このスタイルをいくつかのバージョンの間維持します */
/* ログイン画面の登録リンクを非表示にします */
{{#if (webver "<2025.3.0")}}
app-login form div + div + div + div + hr,
app-login form div + div + div + div + hr + p {
  @extend %vw-hide;
}
{{else}}
app-root a[routerlink="/signup"] {
  @extend %vw-hide;
}
{{/if}}
{{/if}}

{{#unless mail_2fa_enabled}}
/* メールが有効でない場合、`Email` 2FA を非表示にします */
.providers-2fa-1 {
  @extend %vw-hide;
}
{{/unless}}

{{#unless yubico_enabled}}
/* 有効でない場合、`YubiKey OTP security key` 2FA を非表示にします */
.providers-2fa-3 {
  @extend %vw-hide;
}
{{/unless}}

{{#unless webauthn_2fa_supported}}
/* サポートされていない場合、`Passkey` 2FA を非表示にします */
.providers-2fa-7 {
  @extend %vw-hide;
}
{{/unless}}

{{#unless emergency_access_allowed}}
/* 許可されていない場合、Emergency Access を非表示にします */
bit-nav-item[route="settings/emergency-access"] {
  @extend %vw-hide;
}
{{/unless}}

{{#unless sends_allowed}}
/* 許可されていない場合、Sends を非表示にします */
bit-nav-item[route="sends"] {
  @extend %vw-hide;
}
{{/unless}}
/**** End Dynamic Vaultwarden Changes ****/
/**** カスタム変更用の特別なユーザースタイルシートを含めます ****/
{{#if load_user_scss}}
{{> scss/user.vaultwarden.scss }}
{{/if}}
